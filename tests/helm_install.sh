#!/usr/bin/env bash

readonly ROOT_DIR="$(dirname "$(dirname "${0}")")"

helm upgrade --install test-openshift sumologic/sumologic \
  --version 4.13.0 \
  -n sumologic-system \
  --create-namespace -f "${ROOT_DIR}/tests/values.yaml" \
  --set instrumentation.instrumentationJobImage.image.repository=public.ecr.aws/sumologic/kubernetes-tools-kubectl@sha256 \
  --set instrumentation.instrumentationJobImage.image.tag=d3155b864cc74f327adedf7d013a8f0fcb11c2e73a5655b7cafa848824e80172 \
  --set kube-prometheus-stack.kube-state-metrics.image.repository=public.ecr.aws/sumologic/kube-state-metrics@sha256 \
  --set kube-prometheus-stack.kube-state-metrics.image.tag=3551ededa327a35db798ec8286cd843580e3ae395d2231e041e8c4b7621127ee \
  --set kube-prometheus-stack.prometheus-node-exporter.image.repository=public.ecr.aws/sumologic/node-exporter@sha256 \
  --set kube-prometheus-stack.prometheus-node-exporter.image.tag=11e9e604432a66d9b388cb1bf70eac077c7f0372d1264342ef927d76b8ef0272 \
  --set kube-prometheus-stack.prometheus.prometheusSpec.image.repository=public.ecr.aws/sumologic/prometheus@sha256 \
  --set kube-prometheus-stack.prometheus.prometheusSpec.image.sha=4e483f18b2fc1642a32c6a41a802e5351627173710fec674d461a0e4109568a7 \
  --set kube-prometheus-stack.prometheus.prometheusSpec.image.tag=v2.39.0-ubi \
  --set kube-prometheus-stack.prometheusOperator.image.repository=public.ecr.aws/sumologic/prometheus-operator@sha256 \
  --set kube-prometheus-stack.prometheusOperator.image.sha=58a329e6582456b32abebb470086191f8366b927af4703741613993465f116b8 \
  --set kube-prometheus-stack.prometheusOperator.image.tag=v0.59.2-ubi \
  --set kube-prometheus-stack.prometheusOperator.prometheusConfigReloader.image.repository=public.ecr.aws/sumologic/prometheus-config-reloader@sha256 \
  --set kube-prometheus-stack.prometheusOperator.prometheusConfigReloaderImage.sha=0b605d36782afd8f50fd631d0e9c7b19d39ce962af89b7a737b2f09a8ceff291 \
  --set kube-prometheus-stack.prometheusOperator.prometheusConfigReloaderImage.tag=v0.59.2-ubi \
  --set kube-prometheus-stack.prometheusOperator.thanosImage.repository=public.ecr.aws/sumologic/thanos@sha256 \
  --set kube-prometheus-stack.prometheusOperator.thanosImage.sha=5f132bb32e337ed474cb031ae1fcb0320e493097e81ba6915bd1f5361687529a \
  --set kube-prometheus-stack.prometheusOperator.thanosImage.tag=v0.28.0-ubi \
  --set metadata.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set metadata.image.tag=0.118.0-sumo-0-ubi \
  --set metrics-server.image.registry=public.ecr.aws/sumologic \
  --set metrics-server.image.repository=metrics-server@sha256 \
  --set metrics-server.image.tag=65d2a3ddc4b4183f438fa18b655079c93c905cb9e3b8c54977336205dc1fff07 \
  --set opentelemetry-operator.kubeRBACProxy.image.repository=public.ecr.aws/sumologic/kube-rbac-proxy \
  --set opentelemetry-operator.kubeRBACProxy.image.tag=v0.18.2-ubi \
  --set opentelemetry-operator.manager.autoInstrumentationImage.dotnet.repository=public.ecr.aws/sumologic/autoinstrumentation-dotnet@sha256 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.dotnet.tag=f4f385c4489c74b5c43f2fe6b6620a9eb8d9ecab470567236b3c45f636106640 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.java.repository=public.ecr.aws/sumologic/autoinstrumentation-java@sha256 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.java.tag=242958b7d8905f4ac02f6ad38897ba58b9badf2a6213a389e67dcc71fee3630c \
  --set opentelemetry-operator.manager.autoInstrumentationImage.nodejs.repository=public.ecr.aws/sumologic/autoinstrumentation-nodejs@sha256 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.nodejs.tag=c206eef4fdecaa58b4f01e5e7f0dbd74e9606eab2b4debf47461d36191e248d1 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.python.repository=public.ecr.aws/sumologic/autoinstrumentation-python@sha256 \
  --set opentelemetry-operator.manager.autoInstrumentationImage.python.tag=f0fa45fa45e64c7df88f21181ae18ee96fe83cd3988258663d0806ea6f39e6bb \
  --set opentelemetry-operator.manager.collectorImage.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set opentelemetry-operator.manager.collectorImage.tag=0.118.0-sumo-0-ubi \
  --set opentelemetry-operator.manager.image.repository=public.ecr.aws/sumologic/opentelemetry-operator \
  --set opentelemetry-operator.manager.image.tag=0.115.0-ubi \
  --set otelcolInstrumentation.statefulset.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set otelcolInstrumentation.statefulset.image.tag=0.118.0-sumo-0-ubi \
  --set otelevents.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set otelevents.image.tag=0.118.0-sumo-0-ubi \
  --set otellogs.daemonset.initContainers.changeowner.image.repository=public.ecr.aws/sumologic/busybox@sha256 \
  --set otellogs.daemonset.initContainers.changeowner.image.tag=209bc8e0b1d958fc699f3bb75b1248544e372ad35cdc46c991bd1698f641e1f9 \
  --set otellogs.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set otellogs.image.tag=0.118.0-sumo-0-ubi \
  --set pvcCleaner.job.image.repository=public.ecr.aws/sumologic/kubernetes-tools-kubectl@sha256 \
  --set pvcCleaner.job.image.tag=d3155b864cc74f327adedf7d013a8f0fcb11c2e73a5655b7cafa848824e80172 \
  --set sumologic.metrics.collector.otelcol.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set sumologic.metrics.collector.otelcol.image.tag=0.118.0-sumo-0-ubi \
  --set sumologic.metrics.remoteWriteProxy.image.repository=public.ecr.aws/sumologic/nginx-unprivileged@sha256 \
  --set sumologic.metrics.remoteWriteProxy.image.tag=7260555d16c94c4fe1e016626b4cb8a5c0de6b700e2eea28744331fb298f71ae \
  --set sumologic.otelcolImage.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set sumologic.otelcolImage.tag=0.118.0-sumo-0-ubi \
  --set sumologic.setup.job.image.repository=public.ecr.aws/sumologic/kubernetes-setup@sha256 \
  --set sumologic.setup.job.image.tag=cb1c61afe6e41ab1d0f05e95443ed858280d7ae44135cec3ded75774f1d0919e \
  --set sumologic.setup.job.initContainerImage.repository=public.ecr.aws/sumologic/busybox@sha256 \
  --set sumologic.setup.job.initContainerImage.tag=209bc8e0b1d958fc699f3bb75b1248544e372ad35cdc46c991bd1698f641e1f9 \
  --set tailing-sidecar-operator.kubeRbacProxy.image.repository=public.ecr.aws/sumologic/kube-rbac-proxy \
  --set tailing-sidecar-operator.kubeRbacProxy.image.tag=v0.18.2-ubi \
  --set tailing-sidecar-operator.operator.image.repository=public.ecr.aws/sumologic/tailing-sidecar-operator \
  --set tailing-sidecar-operator.operator.image.tag=0.16.0-ubi \
  --set tailing-sidecar-operator.sidecar.image.repository=public.ecr.aws/sumologic/tailing-sidecar \
  --set tailing-sidecar-operator.sidecar.image.tag=0.16.0-ubi \
  --set telegraf-operator.image.repository=public.ecr.aws/sumologic/telegraf-operator-ubi \
  --set telegraf-operator.image.sidecarImage=88c3b5d9f8e9a419131c39e6e22c5aa7cfaab5157fe4c5cc928574f5a3cfda2c \
  --set tracesGateway.deployment.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set tracesGateway.deployment.image.tag=0.118.0-sumo-0-ubi \
  --set tracesSampler.deployment.image.repository=public.ecr.aws/sumologic/sumologic-otel-collector \
  --set tracesSampler.deployment.image.tag=0.118.0-sumo-0-ubi
